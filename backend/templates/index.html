<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ data.name }} - Portfolio</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    
    <!-- Top Contact Bar - REDUCED SPACING -->
    <div class="top-contact-bar">
        <div class="container">
            <div class="contact-links">
                <a href="mailto:{{ data.email }}"><span>üìß</span> {{ data.email }}</a>
                <a href="tel:{{ data.phone }}"><span>üìû</span> {{ data.phone }}</a>
                {% if data.LinkedIn %}
                <a href="https://{{ data.LinkedIn }}" target="_blank"><span>üíº</span> LinkedIn</a>
                {% endif %}
                {% if data.GitHub %}
                <a href="{{ data.GitHub }}" target="_blank"><span>‚öôÔ∏è</span> GitHub</a>
                {% endif %}
            </div>
        </div>
    </div>

    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-wrapper">
                    <div class="logo">
                        <h2>{{ data.name }}</h2>
                    </div>
                    
                    <ul class="nav-menu">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#skills">Skills</a></li>
                        <li><a href="#certifications">Certifications</a></li>
                        <li><a href="#education">Education</a></li>
                        <li><a href="#projects">Projects</a></li>
                        <li><a href="#experience">Experience</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>

                    <button class="theme-toggle-btn" id="themeToggle" onclick="toggleTheme()">
                        <span class="icon-sun">‚òÄÔ∏è</span>
                        <span class="icon-moon">üåô</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="container">
            <h1>{{ data.name }}</h1>
            <p>{{ data.title }}</p>
            <p class="subtitle">Transforming Data into Strategic Business Decisions</p>
            <p>{{ data.experience_years }}+ Years | Power BI | SQL | Python</p>
            <div style="margin-top: 20px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <a href="#projects" class="btn-primary">View My Work</a>
                <a href="#contact" class="btn-secondary">Get In Touch</a>
            </div>
        </div>
    </section>

    <!-- About Section - CARD VIEW -->
    <section id="about" class="about">
        <div class="container">
            <h2>About Me</h2>
            
            <!-- Card wrapper for better visual -->
            <div class="about-card">
                <!-- Profile Photo -->
                <img src="{{ url_for('static', filename='images/profile.jpg') }}" alt="{{ data.name }}" class="profile-photo">
                
                <p style="white-space: pre-line; font-size: 1.05rem; line-height: 1.8; text-align: center;">{{ data.bio }}</p>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <h3>{{ data.experience_years }}+</h3>
                    <p>Years</p>
                </div>
                <div class="stat">
                    <h3>{{ data.projects | length }}</h3>
                    <p>Projects</p>
                </div>
                <div class="stat">
                    <h3>{{ data.certifications | length }}</h3>
                    <p>Certifications</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="skills">
        <div class="container">
            <h2>Skills</h2>
            <div class="skills-grid">
                {% for category, skill_list in data.skills.items() %}
                <div class="skill-category">
                    <h3>{{ category }}</h3>
                    {% for skill in skill_list %}
                    <div class="skill-item">
                        <div class="skill-name">{{ skill.name }}</div>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: {{ skill.level }}%"></div>
                        </div>
                        <div class="skill-percentage">{{ skill.level }}%</div>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Certifications Section -->
    <section id="certifications" class="certifications">
        <div class="container">
            <h2>Certifications</h2>
            <div class="certifications-grid">
                {% for cert in data.certifications %}
                <div class="cert-card">
                    <h3>{{ cert.name }}</h3>
                    <p class="cert-issuer"><strong>Issuer:</strong> {{ cert.issuer }}</p>
                    <p class="cert-date"><strong>Date:</strong> {{ cert.date }}</p>
                    {% if cert.credential_id %}
                    <p class="cert-credential"><strong>Credential ID:</strong> {{ cert.credential_id }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="education">
        <div class="container">
            <h2>Education</h2>
            <div class="education-list">
                {% for edu in data.education %}
                <div class="education-item">
                    <div class="education-header">
                        <h3 class="degree">{{ edu.degree }}</h3>
                        <span class="year">{{ edu.year }}</span>
                    </div>
                    <p class="institution">{{ edu.institution }}</p>
                    {% if edu.details %}
                    <p class="details">{{ edu.details }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects">
        <div class="container">
            <h2>Featured Projects</h2>
            <div class="projects-container">
                {% for project in data.projects %}
                <div class="project-card" onclick="openProjectModal({{ project.id }})">
                    <h3>{{ project.title }}</h3>
                    <p>{{ project.description }}</p>
                    <div class="tools">
                        {% for tool in project.tools %}
                        <span class="tool-tag">{{ tool }}</span>
                        {% endfor %}
                    </div>
                    <p class="impact">{{ project.impact }}</p>
                    <button class="btn-secondary">VIEW DETAILS</button>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Experience Section -->
    <section id="experience" class="experience">
        <div class="container">
            <h2>Work Experience</h2>
            <div class="experience-list">
                {% for job in data.experience %}
                <div class="experience-item">
                    <div class="experience-header">
                        <h3 class="company-name">{{ job.company }}</h3>
                        <span class="duration">{{ job.duration }}</span>
                    </div>
                    <p class="job-role">{{ job.role }}</p>
                    <ul class="achievements-list">
                        {% for achievement in job.achievements %}
                        <li>{{ achievement }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Contact Section -->
<section id="contact" class="contact">
    <div class="container">
        <h2>Get In Touch</h2>
        <p style="text-align: center; margin-bottom: 30px; font-size: 1.1em;">
            Have a question or want to work together? Drop me a message!
        </p>
        
        <form id="contact-form" class="contact-form">
            <div class="form-group">
                <label for="name">Your Name</label>
                <input type="text" id="name" name="from_name" placeholder="John Doe" required>
            </div>
            
            <div class="form-group">
                <label for="email">Your Email</label>
                <input type="email" id="email" name="from_email" placeholder="john@example.com" required>
            </div>
            
            <div class="form-group">
                <label for="message">Your Message</label>
                <textarea id="message" name="message" rows="6" placeholder="Tell me about your project or question..." required></textarea>
            </div>
            
            <button type="submit" class="btn-primary" id="submit-btn">
                <span id="btn-text">Send Message</span>
                <span id="btn-loading" style="display: none;">Sending...</span>
            </button>
            
            <div id="form-message" style="margin-top: 20px; text-align: center; font-weight: 600;"></div>
        </form>
    </div>
</section>



    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 {{ data.name }}. All rights reserved.</p>
        </div>
    </footer>

    <script>
        window.portfolioData = {{ data | tojson | safe }};
        
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        window.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
        });
    </script>
    
    <!-- <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html> -->

<script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- Pass portfolio data to JavaScript -->
    <!-- Pass portfolio data to JavaScript -->
    <script>
        window.portfolioData = {{ data | tojson | safe }};
    </script>
    
    <!-- Load main.js -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- Portfolio Data -->
    <script>
        window.portfolioData = {{ data | tojson | safe }};
        
        // Project Modal Functions
        function openProjectModal(projectId) {
            const projects = window.portfolioData.projects;
            const project = projects.find(p => p.id === projectId);
            
            if (!project) {
                alert('Project not found!');
                return;
            }
            
            const dashboardSection = project.dashboard_url ? `
                <div class="modal-section">
                    <h3>Interactive Dashboard</h3>
                    <iframe src="${project.dashboard_url}" frameborder="0" allowFullScreen="true" class="embedded-dashboard"></iframe>
                </div>
            ` : '';
            
            const modalHTML = `
                <div class="modal-overlay" id="projectModal" onclick="closeProjectModal()">
                    <div class="modal-content modal-large" onclick="event.stopPropagation()">
                        <span class="modal-close" onclick="closeProjectModal()">&times;</span>
                        <h2 class="modal-title">${project.title}</h2>
                        <p class="modal-description">${project.description}</p>
                        
                        <div class="modal-section">
                            <h3>Tools & Technologies</h3>
                            <div class="project-tools">
                                ${project.tools.map(tool => '<span class="tool-tag">' + tool + '</span>').join('')}
                            </div>
                        </div>
                        
                        <div class="modal-section">
                            <h3>Business Impact</h3>
                            <p class="project-impact-large">${project.impact}</p>
                        </div>
                        
                        ${dashboardSection}
                        
                        <div class="modal-section">
                            <h3>Project Details</h3>
                            <p class="project-details-text">${project.details}</p>
                        </div>
                        
                        <div class="modal-footer">
                            <button class="btn-primary" onclick="closeProjectModal()">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            document.body.style.overflow = 'hidden';
        }
        
        function closeProjectModal() {
            const modal = document.getElementById('projectModal');
            if (modal) modal.remove();
            document.body.style.overflow = 'auto';
        }
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeProjectModal();
        });
    </script>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script>
        // Initialize EmailJS
        (function() {
            emailjs.init("DMWMMl3SusH5___T_"); // Replace with your actual public key
        })();
        
        // Handle form submission
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form elements
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const btnLoading = document.getElementById('btn-loading');
            const formMessage = document.getElementById('form-message');
            
            // Disable button and show loading
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline';
            formMessage.style.display = 'none';
            
            // Send email using EmailJS
            emailjs.sendForm(
                'service_ee4iszl',      // Replace with your Service ID
                'template_c0t6ltj',     // Replace with your Template ID
                this
            )
            .then(function(response) {
                console.log('SUCCESS!', response.status, response.text);
                
                // Show success message
                formMessage.textContent = '‚úì Message sent successfully! I\'ll get back to you soon.';
                formMessage.className = 'success';
                formMessage.style.display = 'block';
                
                // Reset form
                document.getElementById('contact-form').reset();
                
                // Re-enable button
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                
            }, function(error) {
                console.log('FAILED...', error);
                
                // Show error message
                formMessage.textContent = '‚úó Failed to send message. Please try again or email me directly.';
                formMessage.className = 'error';
                formMessage.style.display = 'block';
                
                // Re-enable button
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
            });
        });
    </script>
    
    <!-- Portfolio data and other scripts -->
    <script>
        window.portfolioData = {{ data | tojson | safe }};
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
